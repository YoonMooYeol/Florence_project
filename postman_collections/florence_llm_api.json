{
  "info": {
    "name": "Florence LLM API",
    "description": "산모 건강 관련 LLM API 컬렉션",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "인증",
      "description": "인증 관련 API",
      "item": [
        {
          "name": "로그인",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"your_email@example.com\",\n    \"password\": \"your_password\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/accounts/login/",
              "host": ["{{base_url}}"],
              "path": ["v1", "accounts", "login", ""]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// 응답에서 토큰 추출하여 환경 변수에 저장",
                  "var jsonData = pm.response.json();",
                  "if (jsonData && jsonData.token) {",
                  "    pm.environment.set(\"auth_token\", jsonData.token);",
                  "    console.log(\"토큰이 환경 변수에 저장되었습니다.\");",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "LLM 질문 API",
      "description": "산모 건강 관련 질문을 LLM에 전송하고 응답을 받는 API",
      "item": [
        {
          "name": "임신 초기 증상 질문",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"user_id\": \"{{user_id}}\",\n    \"query_text\": \"임신 초기에 나타나는 증상에는 어떤 것들이 있나요?\",\n    \"preferences\": {\n        \"response_style\": \"detailed\",\n        \"include_references\": true\n    },\n    \"pregnancy_week\": 6\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/llm/",
              "host": ["{{base_url}}"],
              "path": ["v1", "llm", ""]
            }
          },
          "response": []
        },
        {
          "name": "임신 중 영양 관리 질문",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"user_id\": \"{{user_id}}\",\n    \"query_text\": \"임신 중기에 필요한 영양소와 권장 식단에 대해 알려주세요.\",\n    \"preferences\": {\n        \"response_style\": \"concise\",\n        \"include_references\": true\n    },\n    \"pregnancy_week\": 20\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/llm/",
              "host": ["{{base_url}}"],
              "path": ["v1", "llm", ""]
            }
          },
          "response": []
        },
        {
          "name": "임신 중 운동 관련 질문",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"user_id\": \"{{user_id}}\",\n    \"query_text\": \"임신 중에 안전하게 할 수 있는 운동은 무엇인가요? 주의해야 할 점도 알려주세요.\",\n    \"preferences\": {\n        \"response_style\": \"detailed\",\n        \"include_references\": true\n    },\n    \"pregnancy_week\": 28\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/llm/",
              "host": ["{{base_url}}"],
              "path": ["v1", "llm", ""]
            }
          },
          "response": []
        },
        {
          "name": "출산 준비 관련 질문",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"user_id\": \"{{user_id}}\",\n    \"query_text\": \"출산을 위해 미리 준비해야 할 것들과 병원에 가져갈 물품 리스트를 알려주세요.\",\n    \"preferences\": {\n        \"response_style\": \"detailed\",\n        \"include_references\": false\n    },\n    \"pregnancy_week\": 36\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/llm/",
              "host": ["{{base_url}}"],
              "path": ["v1", "llm", ""]
            }
          },
          "response": []
        },
        {
          "name": "산후 관리 관련 질문",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"user_id\": \"{{user_id}}\",\n    \"query_text\": \"출산 후 산모의 신체 회복을 위한 관리 방법과 주의사항에 대해 알려주세요.\",\n    \"preferences\": {\n        \"response_style\": \"detailed\",\n        \"include_references\": true\n    },\n    \"pregnancy_week\": null\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/llm/",
              "host": ["{{base_url}}"],
              "path": ["v1", "llm", ""]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "대화 조회 API",
      "description": "사용자의 LLM 대화 기록을 조회하는 API",
      "item": [
        {
          "name": "모든 대화 조회",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/llm/conversations?user_id={{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["v1", "llm", "conversations"],
              "query": [
                {
                  "key": "user_id",
                  "value": "{{user_id}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "질문 유형별 대화 조회",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/llm/conversations?user_id={{user_id}}&query_type=nutrition",
              "host": ["{{base_url}}"],
              "path": ["v1", "llm", "conversations"],
              "query": [
                {
                  "key": "user_id",
                  "value": "{{user_id}}"
                },
                {
                  "key": "query_type",
                  "value": "nutrition"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "대화 수정 API",
      "description": "사용자의 LLM 대화를 수정하는 API",
      "item": [
        {
          "name": "대화 수정 (UUID 사용)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"query\": \"수정된 질문 내용입니다. 임신 중 건강한 식단에 대해 더 자세히 알려주세요.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/llm/conversations/edit?user_id={{user_id}}&conversation_id={{conversation_id}}",
              "host": ["{{base_url}}"],
              "path": ["v1", "llm", "conversations", "edit"],
              "query": [
                {
                  "key": "user_id",
                  "value": "{{user_id}}"
                },
                {
                  "key": "conversation_id",
                  "value": "{{conversation_id}}"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "대화 삭제 API",
      "description": "사용자의 LLM 대화를 삭제하는 API",
      "item": [
        {
          "name": "특정 대화 삭제 (UUID 사용)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"delete_mode\": \"all\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/llm/conversations/delete?user_id={{user_id}}&conversation_id={{conversation_id}}",
              "host": ["{{base_url}}"],
              "path": ["v1", "llm", "conversations", "delete"],
              "query": [
                {
                  "key": "user_id",
                  "value": "{{user_id}}"
                },
                {
                  "key": "conversation_id",
                  "value": "{{conversation_id}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "모든 대화 삭제",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"delete_mode\": \"all\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/llm/conversations/delete?user_id={{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["v1", "llm", "conversations", "delete"],
              "query": [
                {
                  "key": "user_id",
                  "value": "{{user_id}}"
                }
              ]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// 필요한 경우 사전 요청 스크립트 추가"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// API 응답 테스트",
          "pm.test(\"Status code is 200\", function () {",
          "    pm.response.to.have.status(200);",
          "});",
          "",
          "pm.test(\"Response has required fields\", function () {",
          "    var jsonData = pm.response.json();",
          "    if (jsonData && jsonData.response) {",
          "        pm.expect(jsonData).to.have.property('response');",
          "        pm.expect(jsonData).to.have.property('follow_up_questions');",
          "        pm.expect(jsonData).to.have.property('query_info');",
          "    }",
          "});"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "9fa5edd1-d4be-44bb-a2c7-d3da4f8717bd",
      "type": "string"
    },
    {
      "key": "auth_token",
      "value": "your_auth_token_here",
      "type": "string"
    },
    {
      "key": "conversation_id",
      "value": "123e4567-e89b-12d3-a456-426614174000",
      "type": "string"
    }
  ]
} 